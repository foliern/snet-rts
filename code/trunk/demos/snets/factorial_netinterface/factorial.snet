<?xml version="1.0"?>
<metadata xmlns="snet.feis.herts.ac.uk" >
  <net name="factorial" >
     <observer type="before" />
     <observer type="after" />
  </net>
</metadata>

net factorial
{
        box leq1( (x) -> (x,p));
        box condif( (p) -> (<T>) | (<F>));

        net compute
        {
                box sub( (x) -> (xx));
                box mult( (xm,rm) -> (rrm));
        }
        connect [{<F>,x,r} -> {xm=x,rm=r}; {x=x}] .. 
					(sub|mult) .. 
					  ([|{xx},{rrm} |]*{xx,rrm}) ..
					    [{xx,rrm}->{x=xx,r=rrm}];

}
connect (leq1 .. condif .. ([{<T>} -> {<stop>}] | compute))*{<stop>};

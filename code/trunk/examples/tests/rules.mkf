

export SNET_EXTRA_LDFLAGS+=$(BOXES)

.PHONY: clean all lpel

all: $(TARGET)

%.c: %.h

%.o: %.c
	gcc -c $< -o $@ $(INCLUDES)

all: $(TARGET)

$(TARGET):  $(TARGET).snet $(BOXES)
	snetc -g $(SNETCFLAGS) $< -o $@

lpel: $(TARGET).lpel

$(TARGET).lpel: $(TARGET).snet $(BOXES)
	snetc -g $(SNETCFLAGS) $< -o $@ -threading lpel

clean:
	rm -f $(TARGET) $(TARGET).lpel $(TARGET).[och] $(TARGET).lo $(BOXES) mon_*.log *tasks.map
